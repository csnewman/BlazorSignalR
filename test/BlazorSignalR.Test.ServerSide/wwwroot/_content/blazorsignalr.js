!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const o=t(1),r=t(2),c=t(3);var s;!function(e){const n="BlazorSignalR",t={ServerSentEventsTransport:new o.ServerSentEventsTransport,WebSocketsTransport:new r.WebSocketsTransport,BlazorHttpMessageHandler:new c.BlazorHttpMessageHandler};e.initialize=function(){"undefined"==typeof window||window[n]?window[n]=Object.assign({},window[n],t):window[n]=Object.assign({},t)}}(s||(s={})),s.initialize()},function(e,n,t){"use strict";var o=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,c){function s(e){try{a(o.next(e))}catch(e){c(e)}}function i(e){try{a(o.throw(e))}catch(e){c(e)}}function a(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(s,i)}a((o=o.apply(e,n||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});n.ServerSentEventsTransport=class{constructor(){this.connections=new Map,this.IsSupported=(()=>"undefined"!=typeof EventSource)}CreateConnection(e,n){return o(this,void 0,void 0,function*(){const t=yield n.invokeMethodAsync("get_InternalSSEId"),o=yield n.invokeMethodAsync("get_SSEAccessToken");o&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(o)}`);const r=new EventSource(e,{withCredentials:!0});this.connections.set(t,r),r.onmessage=(e=>{n.invokeMethodAsync("HandleSSEMessage",btoa(e.data))}),r.onerror=(e=>{const t=new Error(e.data||"Error occurred");n.invokeMethodAsync("HandleSSEError",t.message)}),r.onopen=(()=>{n.invokeMethodAsync("HandleSSEOpened")})})}CloseConnection(e){return o(this,void 0,void 0,function*(){const n=yield e.invokeMethodAsync("get_InternalSSEId"),t=this.connections.get(n);t&&(this.connections.delete(n),t.close())})}}},function(e,n,t){"use strict";var o=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,c){function s(e){try{a(o.next(e))}catch(e){c(e)}}function i(e){try{a(o.throw(e))}catch(e){c(e)}}function a(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(s,i)}a((o=o.apply(e,n||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});class r{constructor(){this.IsSupported=(()=>"undefined"!=typeof WebSocket)}CreateConnection(e,n,t){return o(this,void 0,void 0,function*(){const o=yield t.invokeMethodAsync("get_InternalWebSocketId"),c=yield t.invokeMethodAsync("get_WebSocketAccessToken");c&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(c)}`),e=e.replace(/^http/,"ws");const s=new WebSocket(e);r.connections.set(o,s),n&&(s.binaryType="arraybuffer"),s.onopen=(e=>{t.invokeMethodAsync("HandleWebSocketOpened")}),s.onerror=(e=>{const n=e instanceof ErrorEvent?e.error:new Error("Error occured");t.invokeMethodAsync("HandleWebSocketError",n.message)}),s.onmessage=(e=>{t.invokeMethodAsync("HandleWebSocketMessage",btoa(e.data))}),s.onclose=(e=>{t.invokeMethodAsync("HandleWebSocketClosed")})})}Send(e,n){return o(this,void 0,void 0,function*(){const t=yield n.invokeMethodAsync("get_InternalWebSocketId"),o=r.connections.get(t);if(!o)throw new Error("Unknown connection");o.send(atob(e))})}CloseConnection(e){return o(this,void 0,void 0,function*(){const n=yield e.invokeMethodAsync("get_InternalWebSocketId"),t=r.connections.get(n);t&&(r.connections.delete(n),t.onclose=(()=>{}),t.onmessage=(()=>{}),t.onerror=(()=>{}),t.close())})}}r.connections=new Map,n.WebSocketsTransport=r},function(e,n,t){"use strict";var o=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,c){function s(e){try{a(o.next(e))}catch(e){c(e)}}function i(e){try{a(o.throw(e))}catch(e){c(e)}}function a(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(s,i)}a((o=o.apply(e,n||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});n.BlazorHttpMessageHandler=class{sendAsync(e,n){return o(this,void 0,void 0,function*(){let t,o;const r=JSON.parse(n),c=Object.assign(r.requestInit,r.requestInitOverrides);e&&(c.body=new Uint8Array(e));try{o=yield(t=yield fetch(r.requestUri,c)).arrayBuffer()}catch(e){return function(e){return{statusCode:null,statusText:null,headers:[],bodyData:null,errorText:e}}(e.toString())}return function(e,n){const t=new Uint8Array(n),o={statusCode:e.status,statusText:e.statusText,headers:[],bodyData:Array.from(t),errorText:null};return e.headers.forEach((e,n)=>{o.headers.push([n,e])}),o}(t,o)})}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0luaXRpYWxpemVTaWduYWxSLnRzIiwid2VicGFjazovLy8uL3NyYy9TZXJ2ZXJTZW50RXZlbnRzVHJhbnNwb3J0LnRzIiwid2VicGFjazovLy8uL3NyYy9XZWJTb2NrZXRzVHJhbnNwb3J0LnRzIiwid2VicGFjazovLy8uL3NyYy9CbGF6b3JIdHRwTWVzc2FnZUhhbmRsZXIudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJTZXJ2ZXJTZW50RXZlbnRzVHJhbnNwb3J0XzEiLCJXZWJTb2NrZXRzVHJhbnNwb3J0XzEiLCJCbGF6b3JIdHRwTWVzc2FnZUhhbmRsZXJfMSIsIlNpZ25hbFIiLCJibGF6b3JTaWduYWxSIiwiZXh0ZW5zaW9uT2JqZWN0IiwiU2VydmVyU2VudEV2ZW50c1RyYW5zcG9ydCIsIldlYlNvY2tldHNUcmFuc3BvcnQiLCJCbGF6b3JIdHRwTWVzc2FnZUhhbmRsZXIiLCJpbml0aWFsaXplIiwid2luZG93IiwiYXNzaWduIiwiW29iamVjdCBPYmplY3RdIiwidGhpcyIsImNvbm5lY3Rpb25zIiwiTWFwIiwiSXNTdXBwb3J0ZWQiLCJFdmVudFNvdXJjZSIsInVybCIsIm1hbmFnZWRPYmoiLCJpZCIsImludm9rZU1ldGhvZEFzeW5jIiwidG9rZW4iLCJpbmRleE9mIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZXZlbnRTb3VyY2UiLCJ3aXRoQ3JlZGVudGlhbHMiLCJzZXQiLCJvbm1lc3NhZ2UiLCJlIiwiYnRvYSIsImRhdGEiLCJvbmVycm9yIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJvbm9wZW4iLCJkZWxldGUiLCJjbG9zZSIsIldlYlNvY2tldCIsImJpbmFyeSIsInJlcGxhY2UiLCJ3ZWJTb2NrZXQiLCJiaW5hcnlUeXBlIiwiX2V2ZW50IiwiZXZlbnQiLCJFcnJvckV2ZW50Iiwib25jbG9zZSIsInNlbmQiLCJhdG9iIiwiYm9keSIsImpzb25GZXRjaEFyZ3MiLCJyZXNwb25zZSIsInJlc3BvbnNlRGF0YSIsImZldGNoT3B0aW9ucyIsIkpTT04iLCJwYXJzZSIsInJlcXVlc3RJbml0IiwicmVxdWVzdEluaXRPdmVycmlkZXMiLCJVaW50OEFycmF5IiwiZmV0Y2giLCJyZXF1ZXN0VXJpIiwiYXJyYXlCdWZmZXIiLCJleCIsImVycm9yTWVzc2FnZSIsInN0YXR1c0NvZGUiLCJzdGF0dXNUZXh0IiwiaGVhZGVycyIsImJvZHlEYXRhIiwiZXJyb3JUZXh0IiwiZ2V0RXJyb3JSZXNwb25zZSIsInRvU3RyaW5nIiwidHlwZWRSZXNwb25zZURhdGEiLCJyZXNwb25zZURlc2NyaXB0b3IiLCJzdGF0dXMiLCJBcnJheSIsImZyb20iLCJmb3JFYWNoIiwicHVzaCIsImdldFN1Y2Nlc3NSZXNwb25zZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxhQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdBLEdBRkExQixFQUFBa0IsRUFBQU8sR0FDQVgsT0FBQUMsZUFBQVUsRUFBQSxXQUF5Q1QsWUFBQSxFQUFBSyxVQUN6QyxFQUFBRSxHQUFBLGlCQUFBRixFQUFBLFFBQUFNLEtBQUFOLEVBQUFyQixFQUFBVSxFQUFBZSxFQUFBRSxFQUFBLFNBQUFBLEdBQWdILE9BQUFOLEVBQUFNLElBQXFCQyxLQUFBLEtBQUFELElBQ3JJLE9BQUFGLEdBSUF6QixFQUFBNkIsRUFBQSxTQUFBMUIsR0FDQSxJQUFBUyxFQUFBVCxLQUFBcUIsV0FDQSxXQUEyQixPQUFBckIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURBSCxFQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQWlCLEVBQUFDLEdBQXNELE9BQUFqQixPQUFBa0IsVUFBQUMsZUFBQTFCLEtBQUF1QixFQUFBQyxJQUd0RC9CLEVBQUFrQyxFQUFBLEdBSUFsQyxJQUFBbUMsRUFBQSxtRkNsRkEsTUFBQUMsRUFBQXBDLEVBQUEsR0FDQXFDLEVBQUFyQyxFQUFBLEdBQ0FzQyxFQUFBdEMsRUFBQSxHQUVBLElBQVV1QyxHQUFWLFNBQVVBLEdBQ04sTUFBTUMsRUFBd0IsZ0JBRXhCQyxHQUNGQywwQkFBMkIsSUFBSU4sRUFBQU0sMEJBQy9CQyxvQkFBcUIsSUFBSU4sRUFBQU0sb0JBQ3pCQyx5QkFBMEIsSUFBSU4sRUFBQU0sMEJBR2xCTCxFQUFBTSxXQUFoQixXQUMwQixvQkFBWEMsUUFBMkJBLE9BQU9OLEdBT3pDTSxPQUFPTixHQUFjMUIsT0FBQWlDLFVBQ2RELE9BQU9OLEdBQ1BDLEdBTlBLLE9BQU9OLEdBQWMxQixPQUFBaUMsVUFDZE4sSUFkbkIsQ0FBVUYsV0F5QlZBLEVBQVFNLDJYQzNCUjNDLEVBQUF3QyxnQ0FBQU0sY0FDWUMsS0FBQUMsWUFBd0MsSUFBSUMsSUF3QzdDRixLQUFBRyxZQUFjLEtBQ2Esb0JBQWhCQyxhQXZDTEwsaUJBQWtCTSxFQUFhQywyQ0FDeEMsTUFBTUMsUUFBV0QsRUFBV0Usa0JBQTBCLHFCQUNoREMsUUFBY0gsRUFBV0Usa0JBQTBCLHNCQUVyREMsSUFDQUosSUFBUUEsRUFBSUssUUFBUSxLQUFPLEVBQUksSUFBTSxxQkFBdUJDLG1CQUFtQkYsTUFHbkYsTUFBTUcsRUFBYyxJQUFJUixZQUFZQyxHQUFPUSxpQkFBaUIsSUFDNURiLEtBQUtDLFlBQVlhLElBQUlQLEVBQUlLLEdBRXpCQSxFQUFZRyxVQUFZLENBQUNDLElBQ3JCVixFQUFXRSxrQkFBd0IsbUJBQW9CUyxLQUFLRCxFQUFFRSxTQUdsRU4sRUFBWU8sUUFBVSxDQUFDSCxJQUNuQixNQUFNSSxFQUFRLElBQUlDLE1BQU1MLEVBQUVFLE1BQVEsa0JBQ2xDWixFQUFXRSxrQkFBd0IsaUJBQWtCWSxFQUFNRSxXQUcvRFYsRUFBWVcsT0FBUyxNQUNqQmpCLEVBQVdFLGtCQUF3Qix1QkFJOUJULGdCQUFpQk8sMkNBQzFCLE1BQU1DLFFBQVdELEVBQVdFLGtCQUEwQixxQkFFaERJLEVBQWNaLEtBQUtDLFlBQVlqQyxJQUFJdUMsR0FFcENLLElBR0xaLEtBQUtDLFlBQVl1QixPQUFPakIsR0FFeEJLLEVBQVlhLGlZQ3RDcEIvQixFQUFBSyxjQWdFV0MsS0FBQUcsWUFBYyxLQUNXLG9CQUFkdUIsV0E5REwzQixpQkFBa0JNLEVBQWFzQixFQUFpQnJCLDJDQUN6RCxNQUFNQyxRQUFXRCxFQUFXRSxrQkFBMEIsMkJBQ2hEQyxRQUFjSCxFQUFXRSxrQkFBMEIsNEJBRXJEQyxJQUNBSixJQUFRQSxFQUFJSyxRQUFRLEtBQU8sRUFBSSxJQUFNLHFCQUF1QkMsbUJBQW1CRixNQUduRkosRUFBTUEsRUFBSXVCLFFBQVEsUUFBUyxNQUUzQixNQUFNQyxFQUFZLElBQUlILFVBQVVyQixHQUNoQ1gsRUFBb0JPLFlBQVlhLElBQUlQLEVBQUlzQixHQUVwQ0YsSUFDQUUsRUFBVUMsV0FBYSxlQUczQkQsRUFBVU4sT0FBUyxDQUFDUSxJQUNoQnpCLEVBQVdFLGtCQUF3QiwyQkFHdkNxQixFQUFVVixRQUFVLENBQUNhLElBQ2pCLE1BQU1aLEVBQVNZLGFBQWlCQyxXQUFjRCxFQUFNWixNQUFRLElBQUlDLE1BQU0saUJBQ3RFZixFQUFXRSxrQkFBd0IsdUJBQXdCWSxFQUFNRSxXQUdyRU8sRUFBVWQsVUFBWSxDQUFDTyxJQUNuQmhCLEVBQVdFLGtCQUF3Qix5QkFBMEJTLEtBQUtLLEVBQVFKLFNBRzlFVyxFQUFVSyxRQUFVLENBQUNGLElBQ2pCMUIsRUFBV0Usa0JBQXdCLDZCQUk5QlQsS0FBTW1CLEVBQWNaLDJDQUM3QixNQUFNQyxRQUFXRCxFQUFXRSxrQkFBMEIsMkJBQ2hEcUIsRUFBWW5DLEVBQW9CTyxZQUFZakMsSUFBSXVDLEdBRXRELElBQUtzQixFQUNELE1BQU0sSUFBSVIsTUFBTSxzQkFFcEJRLEVBQVVNLEtBQUtDLEtBQUtsQixNQUdYbkIsZ0JBQWdCTywyQ0FDekIsTUFBTUMsUUFBV0QsRUFBV0Usa0JBQTBCLDJCQUVoRHFCLEVBQVluQyxFQUFvQk8sWUFBWWpDLElBQUl1QyxHQUVqRHNCLElBR0xuQyxFQUFvQk8sWUFBWXVCLE9BQU9qQixHQUV2Q3NCLEVBQVVLLFFBQVUsU0FDcEJMLEVBQVVkLFVBQVksU0FDdEJjLEVBQVVWLFFBQVUsU0FDcEJVLEVBQVVKLFlBNURDL0IsRUFBQU8sWUFBc0MsSUFBSUMsSUFEN0RqRCxFQUFBeUMsb1lDRkF6QyxFQUFBMEMsK0JBQ1VJLFVBQVVzQyxFQUFnQkMsMkNBQzVCLElBQUlDLEVBQ0FDLEVBRUosTUFBTUMsRUFBNkJDLEtBQUtDLE1BQU1MLEdBQ3hDTSxFQUEyQi9FLE9BQU9pQyxPQUFPMkMsRUFBYUcsWUFBYUgsRUFBYUksc0JBRWxGUixJQUNBTyxFQUFZUCxLQUFPLElBQUlTLFdBQVdULElBR3RDLElBRUlHLFFBREFELFFBQWlCUSxNQUFNTixFQUFhTyxXQUFZSixJQUNsQkssY0FDaEMsTUFBT0MsR0FDTCxPQXlCWixTQUEwQkMsR0FTdEIsT0FQSUMsV0FBWSxLQUNaQyxXQUFZLEtBQ1pDLFdBQ0FDLFNBQVUsS0FDVkMsVUFBV0wsR0EvQkFNLENBQWlCUCxFQUFHUSxZQUcvQixPQUlSLFNBQTRCbkIsRUFBb0JDLEdBQzVDLE1BQU1tQixFQUFvQixJQUFJYixXQUFXTixHQUVuQ29CLEdBQ0ZSLFdBQVliLEVBQVNzQixPQUNyQlIsV0FBWWQsRUFBU2MsV0FDckJDLFdBQ0FDLFNBQVVPLE1BQU1DLEtBQUtKLEdBQ3JCSCxVQUFXLE1BT2YsT0FKQWpCLEVBQVNlLFFBQVFVLFFBQVEsQ0FBQzVGLEVBQU9WLEtBQzdCa0csRUFBbUJOLFFBQVFXLE1BQU12RyxFQUFNVSxNQUdwQ3dGLEVBbkJJTSxDQUFtQjNCLEVBQVVDIiwiZmlsZSI6ImJsYXpvcnNpZ25hbHIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBTZXJ2ZXJTZW50RXZlbnRzVHJhbnNwb3J0IH0gZnJvbSAnLi9TZXJ2ZXJTZW50RXZlbnRzVHJhbnNwb3J0J1xyXG5pbXBvcnQgeyBXZWJTb2NrZXRzVHJhbnNwb3J0IH0gZnJvbSBcIi4vV2ViU29ja2V0c1RyYW5zcG9ydFwiO1xyXG5pbXBvcnQgeyBCbGF6b3JIdHRwTWVzc2FnZUhhbmRsZXIgfSBmcm9tIFwiLi9CbGF6b3JIdHRwTWVzc2FnZUhhbmRsZXJcIjtcclxuXHJcbm5hbWVzcGFjZSBTaWduYWxSIHtcclxuICAgIGNvbnN0IGJsYXpvclNpZ25hbFI6IHN0cmluZyA9ICdCbGF6b3JTaWduYWxSJztcclxuICAgIC8vIGRlZmluZSB3aGF0IHRoaXMgZXh0ZW5zaW9uIGFkZHMgdG8gdGhlIHdpbmRvdyBvYmplY3QgaW5zaWRlIEJsYXpvclNpZ25hbFJcclxuICAgIGNvbnN0IGV4dGVuc2lvbk9iamVjdCA9IHtcclxuICAgICAgICBTZXJ2ZXJTZW50RXZlbnRzVHJhbnNwb3J0OiBuZXcgU2VydmVyU2VudEV2ZW50c1RyYW5zcG9ydCgpLFxyXG4gICAgICAgIFdlYlNvY2tldHNUcmFuc3BvcnQ6IG5ldyBXZWJTb2NrZXRzVHJhbnNwb3J0KCksXHJcbiAgICAgICAgQmxhem9ySHR0cE1lc3NhZ2VIYW5kbGVyOiBuZXcgQmxhem9ySHR0cE1lc3NhZ2VIYW5kbGVyKClcclxuICAgIH07XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICF3aW5kb3dbYmxhem9yU2lnbmFsUl0pIHtcclxuICAgICAgICAgICAgLy8gd2hlbiB0aGUgbGlicmFyeSBpcyBsb2FkZWQgaW4gYSBicm93c2VyIHZpYSBhIDxzY3JpcHQ+IGVsZW1lbnQsIG1ha2UgdGhlXHJcbiAgICAgICAgICAgIC8vIGZvbGxvd2luZyBBUElzIGF2YWlsYWJsZSBpbiBnbG9iYWwgc2NvcGUgZm9yIGludm9jYXRpb24gZnJvbSBKU1xyXG4gICAgICAgICAgICB3aW5kb3dbYmxhem9yU2lnbmFsUl0gPSB7XHJcbiAgICAgICAgICAgICAgICAuLi5leHRlbnNpb25PYmplY3RcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aW5kb3dbYmxhem9yU2lnbmFsUl0gPSB7XHJcbiAgICAgICAgICAgICAgICAuLi53aW5kb3dbYmxhem9yU2lnbmFsUl0sXHJcbiAgICAgICAgICAgICAgICAuLi5leHRlbnNpb25PYmplY3RcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcblNpZ25hbFIuaW5pdGlhbGl6ZSgpOyIsImltcG9ydCB7IERvdE5ldFJlZmVyZW5jZVR5cGUgfSBmcm9tICcuL0RvdE5ldCdcclxuXHJcbmV4cG9ydCBjbGFzcyBTZXJ2ZXJTZW50RXZlbnRzVHJhbnNwb3J0IHtcclxuICAgIHByaXZhdGUgY29ubmVjdGlvbnM6IE1hcDxzdHJpbmcsIEV2ZW50U291cmNlPiA9IG5ldyBNYXA8c3RyaW5nLCBFdmVudFNvdXJjZT4oKTtcclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgQ3JlYXRlQ29ubmVjdGlvbiAodXJsOiBzdHJpbmcsIG1hbmFnZWRPYmo6IERvdE5ldFJlZmVyZW5jZVR5cGUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBjb25zdCBpZCA9IGF3YWl0IG1hbmFnZWRPYmouaW52b2tlTWV0aG9kQXN5bmM8c3RyaW5nPihcImdldF9JbnRlcm5hbFNTRUlkXCIpO1xyXG4gICAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgbWFuYWdlZE9iai5pbnZva2VNZXRob2RBc3luYzxzdHJpbmc+KFwiZ2V0X1NTRUFjY2Vzc1Rva2VuXCIpO1xyXG5cclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgdXJsICs9ICh1cmwuaW5kZXhPZihcIj9cIikgPCAwID8gXCI/XCIgOiBcIiZcIikgKyBgYWNjZXNzX3Rva2VuPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHRva2VuKX1gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZXZlbnRTb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UodXJsLCB7IHdpdGhDcmVkZW50aWFsczogdHJ1ZSB9KTtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb25zLnNldChpZCwgZXZlbnRTb3VyY2UpO1xyXG5cclxuICAgICAgICBldmVudFNvdXJjZS5vbm1lc3NhZ2UgPSAoZTogTWVzc2FnZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG1hbmFnZWRPYmouaW52b2tlTWV0aG9kQXN5bmM8dm9pZD4oXCJIYW5kbGVTU0VNZXNzYWdlXCIsIGJ0b2EoZS5kYXRhKSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZXZlbnRTb3VyY2Uub25lcnJvciA9IChlOiBNZXNzYWdlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoZS5kYXRhIHx8IFwiRXJyb3Igb2NjdXJyZWRcIik7XHJcbiAgICAgICAgICAgIG1hbmFnZWRPYmouaW52b2tlTWV0aG9kQXN5bmM8dm9pZD4oXCJIYW5kbGVTU0VFcnJvclwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBldmVudFNvdXJjZS5vbm9wZW4gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIG1hbmFnZWRPYmouaW52b2tlTWV0aG9kQXN5bmM8dm9pZD4oXCJIYW5kbGVTU0VPcGVuZWRcIik7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgQ2xvc2VDb25uZWN0aW9uIChtYW5hZ2VkT2JqOiBEb3ROZXRSZWZlcmVuY2VUeXBlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSBhd2FpdCBtYW5hZ2VkT2JqLmludm9rZU1ldGhvZEFzeW5jPHN0cmluZz4oXCJnZXRfSW50ZXJuYWxTU0VJZFwiKTtcclxuXHJcbiAgICAgICAgY29uc3QgZXZlbnRTb3VyY2UgPSB0aGlzLmNvbm5lY3Rpb25zLmdldChpZCk7XHJcblxyXG4gICAgICAgIGlmICghZXZlbnRTb3VyY2UpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9ucy5kZWxldGUoaWQpO1xyXG5cclxuICAgICAgICBldmVudFNvdXJjZS5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBJc1N1cHBvcnRlZCA9ICgpOiBib29sZWFuID0+IHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIEV2ZW50U291cmNlICE9PSBcInVuZGVmaW5lZFwiO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgRG90TmV0UmVmZXJlbmNlVHlwZSB9IGZyb20gJy4vRG90TmV0J1xyXG5cclxuZXhwb3J0IGNsYXNzIFdlYlNvY2tldHNUcmFuc3BvcnQge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgY29ubmVjdGlvbnM6IE1hcDxzdHJpbmcsIFdlYlNvY2tldD4gPSBuZXcgTWFwPHN0cmluZywgV2ViU29ja2V0PigpO1xyXG5cclxuICAgIHB1YmxpYyBhc3luYyBDcmVhdGVDb25uZWN0aW9uICh1cmw6IHN0cmluZywgYmluYXJ5OiBib29sZWFuLCBtYW5hZ2VkT2JqOiBEb3ROZXRSZWZlcmVuY2VUeXBlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSBhd2FpdCBtYW5hZ2VkT2JqLmludm9rZU1ldGhvZEFzeW5jPHN0cmluZz4oXCJnZXRfSW50ZXJuYWxXZWJTb2NrZXRJZFwiKTtcclxuICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IG1hbmFnZWRPYmouaW52b2tlTWV0aG9kQXN5bmM8c3RyaW5nPihcImdldF9XZWJTb2NrZXRBY2Nlc3NUb2tlblwiKTtcclxuXHJcbiAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgIHVybCArPSAodXJsLmluZGV4T2YoXCI/XCIpIDwgMCA/IFwiP1wiIDogXCImXCIpICsgYGFjY2Vzc190b2tlbj0ke2VuY29kZVVSSUNvbXBvbmVudCh0b2tlbil9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVybCA9IHVybC5yZXBsYWNlKC9eaHR0cC8sIFwid3NcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IHdlYlNvY2tldCA9IG5ldyBXZWJTb2NrZXQodXJsKTtcclxuICAgICAgICBXZWJTb2NrZXRzVHJhbnNwb3J0LmNvbm5lY3Rpb25zLnNldChpZCwgd2ViU29ja2V0KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoYmluYXJ5KSB7XHJcbiAgICAgICAgICAgIHdlYlNvY2tldC5iaW5hcnlUeXBlID0gXCJhcnJheWJ1ZmZlclwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2ViU29ja2V0Lm9ub3BlbiA9IChfZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG1hbmFnZWRPYmouaW52b2tlTWV0aG9kQXN5bmM8dm9pZD4oXCJIYW5kbGVXZWJTb2NrZXRPcGVuZWRcIik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgd2ViU29ja2V0Lm9uZXJyb3IgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gKGV2ZW50IGluc3RhbmNlb2YgRXJyb3JFdmVudCkgPyBldmVudC5lcnJvciA6IG5ldyBFcnJvcihcIkVycm9yIG9jY3VyZWRcIik7XHJcbiAgICAgICAgICAgIG1hbmFnZWRPYmouaW52b2tlTWV0aG9kQXN5bmM8dm9pZD4oXCJIYW5kbGVXZWJTb2NrZXRFcnJvclwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB3ZWJTb2NrZXQub25tZXNzYWdlID0gKG1lc3NhZ2U6IE1lc3NhZ2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBtYW5hZ2VkT2JqLmludm9rZU1ldGhvZEFzeW5jPHZvaWQ+KFwiSGFuZGxlV2ViU29ja2V0TWVzc2FnZVwiLCBidG9hKG1lc3NhZ2UuZGF0YSkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHdlYlNvY2tldC5vbmNsb3NlID0gKGV2ZW50OiBDbG9zZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG1hbmFnZWRPYmouaW52b2tlTWV0aG9kQXN5bmM8dm9pZD4oXCJIYW5kbGVXZWJTb2NrZXRDbG9zZWRcIik7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgU2VuZCAoZGF0YTogc3RyaW5nLCBtYW5hZ2VkT2JqOiBEb3ROZXRSZWZlcmVuY2VUeXBlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgY29uc3QgaWQgPSBhd2FpdCBtYW5hZ2VkT2JqLmludm9rZU1ldGhvZEFzeW5jPHN0cmluZz4oXCJnZXRfSW50ZXJuYWxXZWJTb2NrZXRJZFwiKTtcclxuICAgICAgICBjb25zdCB3ZWJTb2NrZXQgPSBXZWJTb2NrZXRzVHJhbnNwb3J0LmNvbm5lY3Rpb25zLmdldChpZCk7XHJcblxyXG4gICAgICAgIGlmICghd2ViU29ja2V0KVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGNvbm5lY3Rpb25cIik7XHJcblxyXG4gICAgICAgIHdlYlNvY2tldC5zZW5kKGF0b2IoZGF0YSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBDbG9zZUNvbm5lY3Rpb24obWFuYWdlZE9iajogRG90TmV0UmVmZXJlbmNlVHlwZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IGlkID0gYXdhaXQgbWFuYWdlZE9iai5pbnZva2VNZXRob2RBc3luYzxzdHJpbmc+KFwiZ2V0X0ludGVybmFsV2ViU29ja2V0SWRcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IHdlYlNvY2tldCA9IFdlYlNvY2tldHNUcmFuc3BvcnQuY29ubmVjdGlvbnMuZ2V0KGlkKTtcclxuXHJcbiAgICAgICAgaWYgKCF3ZWJTb2NrZXQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgV2ViU29ja2V0c1RyYW5zcG9ydC5jb25uZWN0aW9ucy5kZWxldGUoaWQpO1xyXG5cclxuICAgICAgICB3ZWJTb2NrZXQub25jbG9zZSA9ICgpID0+IHt9O1xyXG4gICAgICAgIHdlYlNvY2tldC5vbm1lc3NhZ2UgPSAoKSA9PiB7fTtcclxuICAgICAgICB3ZWJTb2NrZXQub25lcnJvciA9ICgpID0+IHt9O1xyXG4gICAgICAgIHdlYlNvY2tldC5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBJc1N1cHBvcnRlZCA9ICgpOiBib29sZWFuID0+IHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIFdlYlNvY2tldCAhPT0gXCJ1bmRlZmluZWRcIjtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBCbGF6b3JIdHRwTWVzc2FnZUhhbmRsZXIge1xyXG4gICAgYXN5bmMgc2VuZEFzeW5jKGJvZHk6IG51bWJlcltdLCBqc29uRmV0Y2hBcmdzOiBzdHJpbmcpOiBQcm9taXNlPFJlc3BvbnNlRGVzY3JpcHRvcj4ge1xyXG4gICAgICAgIGxldCByZXNwb25zZTogUmVzcG9uc2U7XHJcbiAgICAgICAgbGV0IHJlc3BvbnNlRGF0YTogQXJyYXlCdWZmZXI7XHJcblxyXG4gICAgICAgIGNvbnN0IGZldGNoT3B0aW9uczogRmV0Y2hPcHRpb25zID0gSlNPTi5wYXJzZShqc29uRmV0Y2hBcmdzKTtcclxuICAgICAgICBjb25zdCByZXF1ZXN0SW5pdDogUmVxdWVzdEluaXQgPSBPYmplY3QuYXNzaWduKGZldGNoT3B0aW9ucy5yZXF1ZXN0SW5pdCwgZmV0Y2hPcHRpb25zLnJlcXVlc3RJbml0T3ZlcnJpZGVzKTtcclxuXHJcbiAgICAgICAgaWYgKGJvZHkpIHtcclxuICAgICAgICAgICAgcmVxdWVzdEluaXQuYm9keSA9IG5ldyBVaW50OEFycmF5KGJvZHkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmZXRjaE9wdGlvbnMucmVxdWVzdFVyaSwgcmVxdWVzdEluaXQpO1xyXG4gICAgICAgICAgICByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRFcnJvclJlc3BvbnNlKGV4LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGdldFN1Y2Nlc3NSZXNwb25zZShyZXNwb25zZSwgcmVzcG9uc2VEYXRhKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U3VjY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlOiBSZXNwb25zZSwgcmVzcG9uc2VEYXRhOiBBcnJheUJ1ZmZlcik6IFJlc3BvbnNlRGVzY3JpcHRvciB7XHJcbiAgICBjb25zdCB0eXBlZFJlc3BvbnNlRGF0YSA9IG5ldyBVaW50OEFycmF5KHJlc3BvbnNlRGF0YSk7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2VEZXNjcmlwdG9yOiBSZXNwb25zZURlc2NyaXB0b3IgPSB7XHJcbiAgICAgICAgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzLFxyXG4gICAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1c1RleHQsXHJcbiAgICAgICAgaGVhZGVyczogW10sXHJcbiAgICAgICAgYm9keURhdGE6IEFycmF5LmZyb20odHlwZWRSZXNwb25zZURhdGEpLFxyXG4gICAgICAgIGVycm9yVGV4dDogbnVsbFxyXG4gICAgfTtcclxuXHJcbiAgICByZXNwb25zZS5oZWFkZXJzLmZvckVhY2goKHZhbHVlLCBuYW1lKSA9PiB7XHJcbiAgICAgICAgcmVzcG9uc2VEZXNjcmlwdG9yLmhlYWRlcnMucHVzaChbbmFtZSwgdmFsdWVdKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiByZXNwb25zZURlc2NyaXB0b3I7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEVycm9yUmVzcG9uc2UoZXJyb3JNZXNzYWdlOiBzdHJpbmcpOiBSZXNwb25zZURlc2NyaXB0b3Ige1xyXG4gICAgY29uc3QgcmVzcG9uc2VEZXNjcmlwdG9yOiBSZXNwb25zZURlc2NyaXB0b3IgPSB7XHJcbiAgICAgICAgc3RhdHVzQ29kZTogbnVsbCxcclxuICAgICAgICBzdGF0dXNUZXh0OiBudWxsLFxyXG4gICAgICAgIGhlYWRlcnM6IFtdLFxyXG4gICAgICAgIGJvZHlEYXRhOiBudWxsLFxyXG4gICAgICAgIGVycm9yVGV4dDogZXJyb3JNZXNzYWdlXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiByZXNwb25zZURlc2NyaXB0b3I7XHJcbn1cclxuXHJcbi8vIEtlZXAgdGhlc2UgaW4gc3luYyB3aXRoIHRoZSAuTkVUIGVxdWl2YWxlbnQgaW4gQmxhem9ySHR0cE1lc3NhZ2VIYW5kbGVyLmNzXHJcbmludGVyZmFjZSBGZXRjaE9wdGlvbnMge1xyXG4gICAgcmVxdWVzdFVyaTogc3RyaW5nO1xyXG4gICAgcmVxdWVzdEluaXQ6IFJlcXVlc3RJbml0O1xyXG4gICAgcmVxdWVzdEluaXRPdmVycmlkZXM6IFJlcXVlc3RJbml0O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUmVzcG9uc2VEZXNjcmlwdG9yIHtcclxuICAgIHN0YXR1c0NvZGU6IG51bWJlciB8IG51bGw7XHJcbiAgICBzdGF0dXNUZXh0OiBzdHJpbmcgfCBudWxsO1xyXG4gICAgaGVhZGVyczogc3RyaW5nW11bXTtcclxuICAgIGJvZHlEYXRhOiBudW1iZXJbXSB8IG51bGw7XHJcbiAgICBlcnJvclRleHQ6IHN0cmluZyB8IG51bGw7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==